<div class="app-container">
  <!-- Modern Navigation Header -->
  <header
    class="main-header"
    [class.header-hidden]="!isHeaderVisible"
    [class.header-scrolling]="isHeaderScrolling"
  >
    <div class="header-content">
      <!-- Logo / Brand -->
      <a [routerLink]="['/', currentLang]" class="logo">
        <div class="logo-icon">
          <img src="assets/logo.jpg" alt="LibraryApp Logo" />
        </div>
        <div class="logo-text">
          <span class="logo-title">LibraryApp</span>
          <span class="logo-subtitle">{{ "HEADER_SUBTITLE" | translate }}</span>
        </div>
      </a>

      <!-- Mobile Menu Toggle -->
      <button
        class="mobile-menu-toggle"
        (click)="toggleMobileMenu()"
        aria-label="Toggle menu"
      >
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

      <!-- Main Navigation -->
      <nav class="main-nav" [class.mobile-open]="isMobileMenuOpen">
        <div class="nav-links">
          <a
            [routerLink]="['/', currentLang, 'books']"
            class="nav-link"
            (click)="closeMobileMenu()"
            routerLinkActive="active"
          >
            <i class="fas fa-book"></i>
            <span>{{ "NAV_BOOKS" | translate }}</span>
          </a>
          <a
            [routerLink]="['/', currentLang, 'authors']"
            class="nav-link"
            (click)="closeMobileMenu()"
            routerLinkActive="active"
          >
            <i class="fas fa-users"></i>
            <span>{{ "NAV_AUTHORS" | translate }}</span>
          </a>
          <a
            [routerLink]="['/', currentLang, 'publishers']"
            class="nav-link"
            (click)="closeMobileMenu()"
            routerLinkActive="active"
          >
            <i class="fas fa-building"></i>
            <span>{{ "NAV_PUBLISHERS" | translate }}</span>
          </a>
        </div>
      </nav>

      <!-- Header Actions -->
      <div class="header-actions">
        <!-- Language Selector -->
        <div class="language-selector">
          <button
            class="lang-btn"
            (click)="toggleLanguageDropdown()"
            aria-label="Select language"
          >
            <i class="fas fa-globe"></i>
            <span class="lang-text">{{ currentLang.toUpperCase() }}</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="lang-dropdown" [class.show]="isLanguageDropdownOpen">
            <button
              class="lang-option"
              [class.active]="currentLang === 'tr'"
              (click)="switchLanguage('tr')"
            >
              <span class="flag">ðŸ‡¹ðŸ‡·</span>
              <span>{{ "LANG_TURKISH" | translate }}</span>
            </button>
            <button
              class="lang-option"
              [class.active]="currentLang === 'en'"
              (click)="switchLanguage('en')"
            >
              <span class="flag">ðŸ‡ºðŸ‡¸</span>
              <span>{{ "LANG_ENGLISH" | translate }}</span>
            </button>
          </div>
        </div>

        <!-- Authentication Actions -->
        <div class="auth-actions">
          <ng-container *ngIf="!isLoggedIn(); else loggedInBlock">
            <a
              [routerLink]="['/', currentLang, 'login']"
              class="btn btn-outline"
            >
              <i class="fas fa-sign-in-alt"></i>
              <span>{{ "HEADER_LOGIN" | translate }}</span>
            </a>
            <a
              [routerLink]="['/', currentLang, 'register']"
              class="btn btn-primary"
            >
              <i class="fas fa-user-plus"></i>
              <span>{{ "HEADER_REGISTER" | translate }}</span>
            </a>
          </ng-container>

          <!-- Logged In User Menu -->
          <ng-template #loggedInBlock>
            <div class="user-menu">
              <button
                class="user-menu-trigger"
                (click)="toggleUserMenu()"
                aria-label="User menu"
              >
                <div class="user-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="user-info">
                  <span class="user-name">{{ "USER_MENU" | translate }}</span>
                  <span class="user-status">{{
                    "USER_STATUS_ONLINE" | translate
                  }}</span>
                </div>
                <i class="fas fa-chevron-down"></i>
              </button>
              <div class="user-menu-dropdown" [class.show]="isUserMenuOpen">
                <div class="dropdown-header">
                  <div class="user-avatar-large">
                    <i class="fas fa-user"></i>
                  </div>
                  <div class="user-details">
                    <span class="user-name-large">{{
                      getUserName() || "USER_MENU" | translate
                    }}</span>
                    <span class="user-email">{{
                      getUserEmail() || "USER_EMAIL" | translate
                    }}</span>
                  </div>
                </div>
                <div class="dropdown-content">
                  <a
                    [routerLink]="['/', currentLang, 'dashboard']"
                    class="dropdown-item"
                    (click)="closeUserMenu()"
                  >
                    <i class="fas fa-tachometer-alt"></i>
                    <span>{{ "MY_LIBRARY" | translate }}</span>
                  </a>
                  <a
                    [routerLink]="['/', currentLang, 'profile']"
                    class="dropdown-item"
                    (click)="closeUserMenu()"
                  >
                    <i class="fas fa-user"></i>
                    <span>{{ "HEADER_MY_ACCOUNT" | translate }}</span>
                  </a>
                  <div class="dropdown-divider"></div>
                  <a
                    [routerLink]="['/', currentLang, 'favorites']"
                    class="dropdown-item"
                    (click)="closeUserMenu()"
                  >
                    <i class="fas fa-heart"></i>
                    <span>{{ "USER_FAVORITES" | translate }}</span>
                  </a>
                  <a
                    [routerLink]="['/', currentLang, 'borrowed']"
                    class="dropdown-item"
                    (click)="closeUserMenu()"
                  >
                    <i class="fas fa-book-reader"></i>
                    <span>{{ "USER_BORROWED" | translate }}</span>
                  </a>
                  <div class="dropdown-divider"></div>
                  <button
                    (click)="logout(); closeUserMenu()"
                    class="dropdown-item logout-btn"
                  >
                    <i class="fas fa-sign-out-alt"></i>
                    <span>{{ "USER_LOGOUT" | translate }}</span>
                  </button>
                </div>
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>

  <!-- Toast Notifications -->
  <app-toast></app-toast>

  <!-- Modern Footer -->
  <footer class="main-footer">
    <div class="footer-content">
      <!-- Footer Bottom -->
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <p class="copyright">{{ "FOOTER_COPYRIGHT" | translate }}</p>
        </div>
      </div>
    </div>
  </footer>
</div>
