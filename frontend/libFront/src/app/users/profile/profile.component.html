<!-- Profile Container -->
<div class="profile-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-left">
        <button class="btn btn-back" (click)="goBack()">
          <i class="fas fa-arrow-left"></i>
          <span>{{ 'BACK' | translate }}</span>
        </button>
      </div>
      <div class="header-center">
        <h1 class="page-title">
          <i class="fas fa-user-circle"></i>
          <span>{{ 'PROFILE_TITLE' | translate }}</span>
        </h1>
      </div>
      <div class="header-right">
        <button class="btn btn-primary" (click)="startEditing()" *ngIf="!isEditing && user">
          <i class="fas fa-edit"></i>
          <span>{{ 'EDIT_PROFILE' | translate }}</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-content">
      <div class="loading-spinner">
        <i class="fas fa-user fa-pulse"></i>
      </div>
      <h3>{{ 'LOADING_PROFILE' | translate }}</h3>
      <p>{{ 'PLEASE_WAIT' | translate }}</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-state">
    <div class="error-content">
      <div class="error-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3>{{ 'ERROR_LOADING_PROFILE' | translate }}</h3>
      <p>{{ error }}</p>
      <button class="btn btn-primary" (click)="loadUserProfile()">
        <i class="fas fa-redo"></i>
        {{ 'RETRY' | translate }}
      </button>
    </div>
  </div>

  <!-- Profile Content -->
  <div *ngIf="user && !isLoading && !error" class="profile-content">
    <!-- Profile Information -->
    <div class="profile-info">
      <div class="section-header">
        <h3>{{ 'PROFILE_INFORMATION' | translate }}</h3>
        <span class="section-subtitle">{{ 'PROFILE_INFORMATION_DESCRIPTION' | translate }}</span>
      </div>
      
      <!-- View Mode -->
      <div *ngIf="!isEditing" class="info-grid">
        <div class="info-item">
          <div class="info-label">
            <i class="fas fa-user"></i>
            <span>{{ 'FULL_NAME' | translate }}</span>
          </div>
          <div class="info-value">{{ user.name }}</div>
        </div>
        
        <div class="info-item">
          <div class="info-label">
            <i class="fas fa-envelope"></i>
            <span>{{ 'EMAIL' | translate }}</span>
          </div>
          <div class="info-value">{{ user.email }}</div>
        </div>
        
        <div class="info-item" *ngIf="user.age">
          <div class="info-label">
            <i class="fas fa-birthday-cake"></i>
            <span>{{ 'AGE' | translate }}</span>
          </div>
          <div class="info-value">{{ user.age }}</div>
        </div>
        
        <div class="info-item" *ngIf="user.gender">
          <div class="info-label">
            <i class="fas fa-venus-mars"></i>
            <span>{{ 'GENDER' | translate }}</span>
          </div>
          <div class="info-value">{{ user.gender === 'M' ? 'MALE' : user.gender === 'F' ? 'FEMALE' : 'OTHER' | translate }}</div>
        </div>
        
        <div class="info-item" *ngIf="user.address">
          <div class="info-label">
            <i class="fas fa-map-marker-alt"></i>
            <span>{{ 'ADDRESS' | translate }}</span>
          </div>
          <div class="info-value">{{ user.address }}</div>
        </div>
        
        <div class="info-item">
          <div class="info-label">
            <i class="fas fa-user-tag"></i>
            <span>{{ 'ROLE' | translate }}</span>
          </div>
          <div class="info-value">{{ user.role === 'Admin' ? 'ADMIN' : 'USER' | translate }}</div>
        </div>
      </div>

      <!-- Edit Mode -->
      <div *ngIf="isEditing" class="edit-form">
        <div class="form-header">
          <h3>{{ 'EDIT_PROFILE' | translate }}</h3>
          <p>{{ 'EDIT_PROFILE_DESCRIPTION' | translate }}</p>
        </div>
        
        <form (ngSubmit)="saveProfile()" class="profile-form">
          <div class="form-group">
            <label for="name">{{ 'FULL_NAME' | translate }}</label>
            <input 
              type="text" 
              id="name"
              [(ngModel)]="editForm.name" 
              name="name"
              [placeholder]="'FULL_NAME_PLACEHOLDER' | translate"
              class="form-input"
              required>
          </div>
          
          <div class="form-group">
            <label for="email">{{ 'EMAIL' | translate }}</label>
            <input 
              type="email" 
              id="email"
              [(ngModel)]="editForm.email" 
              name="email"
              [placeholder]="'EMAIL_PLACEHOLDER' | translate"
              class="form-input"
              required>
          </div>
          
          <div class="form-group">
            <label for="age">{{ 'AGE' | translate }}</label>
            <input 
              type="number" 
              id="age"
              [(ngModel)]="editForm.age" 
              name="age"
              [placeholder]="'AGE_PLACEHOLDER' | translate"
              class="form-input"
              min="1"
              max="150">
          </div>
          
          <div class="form-group">
            <label for="gender">{{ 'GENDER' | translate }}</label>
            <select 
              id="gender"
              [(ngModel)]="editForm.gender" 
              name="gender"
              class="form-input">
              <option value="">{{ 'SELECT_GENDER' | translate }}</option>
              <option value="M">{{ 'MALE' | translate }}</option>
              <option value="F">{{ 'FEMALE' | translate }}</option>
              <option value="O">{{ 'OTHER' | translate }}</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="address">{{ 'ADDRESS' | translate }}</label>
            <textarea 
              id="address"
              [(ngModel)]="editForm.address" 
              name="address"
              [placeholder]="'ADDRESS_PLACEHOLDER' | translate"
              class="form-textarea"
              rows="3"></textarea>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="cancelEditing()" [disabled]="isSaving">
              <i class="fas fa-times"></i>
              <span>{{ 'CANCEL' | translate }}</span>
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="isSaving">
              <i class="fas fa-save" *ngIf="!isSaving"></i>
              <i class="fas fa-spinner fa-spin" *ngIf="isSaving"></i>
              <span>{{ isSaving ? ('SAVING' | translate) : ('SAVE_CHANGES' | translate) }}</span>
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Account Actions -->
    <div class="account-actions">
      <div class="section-header">
        <h3>{{ 'ACCOUNT_ACTIONS' | translate }}</h3>
        <span class="section-subtitle">{{ 'ACCOUNT_ACTIONS_DESCRIPTION' | translate }}</span>
      </div>
      <div class="actions-list">
        <button class="btn btn-outline btn-full" (click)="startEditing()" *ngIf="!isEditing">
          <i class="fas fa-edit"></i>
          <span>{{ 'EDIT_PROFILE' | translate }}</span>
        </button>
      </div>
    </div>

    <!-- Logout Section -->
    <div class="logout-section">
      <div class="section-header">
        <h3>{{ 'LOGOUT_SECTION' | translate }}</h3>
        <span class="section-subtitle">{{ 'LOGOUT_SECTION_DESCRIPTION' | translate }}</span>
      </div>
      <div class="actions-list">
        <button class="btn btn-danger btn-full" (click)="confirmLogout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>{{ 'USER_LOGOUT' | translate }}</span>
        </button>
      </div>
    </div>
  </div>
</div> 